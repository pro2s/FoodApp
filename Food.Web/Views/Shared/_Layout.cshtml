<!DOCTYPE html>
<html ng-app="app">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <data ng-init="setAPI('http://localhost:53058/')" />
    <nav class="navbar navbar-default navbar-static-top" ng-controller="TopMenu as topmenu" >
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">FoodApp</a>
            </div>
            <ul class="nav navbar-nav">
                <li ng-class="{ active: topmenu.isActive('/')}"><a href="#/">Home</a></li>
                <li ng-class="{ active: topmenu.isActive('/admin')}"><a href="#/admin">Admin</a></li>
                <li ng-class="{ active: topmenu.isActive('/menu')}"><a href="#/menu">Menu</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" target="_self">{{username}}<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li ng-repeat="user in topmenu.users"><a href="" ng-click="topmenu.selectUser(user)">{{user.name}}</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right" ng-if="topmenu.auth.isLogined">
                <li ng-class="{ active: topmenu.isActive('/user')}" >
                    <a href="#/user" ng-bind="topmenu.auth.username">User</a>
                </li>
                <li><a href="" ng-click="topmenu.logout()">Logout</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right" ng-if="!topmenu.auth.isLogined">
                <li><a href="" ng-click="topmenu.showLogin()">Login</a></li>
                <li><a href="" ng-click="topmenu.showRegister()">Registration</a></li>
            </ul>
        </div>
    </nav>

    <div class="container" ng-view></div>


    <!-- Modal -->
    <login-form></login-form>    
    



    <div class="container" body-content>
        @RenderBody()
    </div>

        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/angular")
        @Scripts.Render("~/bundles/bootstrap")
        @Scripts.Render("~/bundles/app")
        @RenderSection("scripts", required: false)
</body>
</html>
